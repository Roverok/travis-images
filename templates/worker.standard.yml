json:
  rvm:
    default: 1.9.3-p547
    rubies:
      - name: 1.9.3-p547
    gems:
      - bundler
      - rake
  golang:
    multi:
      versions:
        - go1.3.1
      aliases: []
      default_version: go1.3.1
  travis_build_environment:
    use_tmpfs_for_builds: false
recipes:
  #
  # Travis environment + build toolchain
  #
  - travis_build_environment
  - apt
  - build-essential
  - clang::tarball
  - golang::multi
  - networking_basic
  - openssl
  - sysctl
  - git::ppa
  - mercurial
  - bazaar
  - subversion
  - scons
  - unarchivers
  - md5deep
  - dictionaries
  #
  # additional libraries needed to run headless WebKit,
  # build parsers, for ossp-uuid to work and so on
  #
  - libqt4
  - libgdbm
  - libncurses
  - libossp-uuid
  - libffi
  - ragel
  - imagemagick
  - mingw32
  - libevent
  #
  # JDK and related build toolchain
  #
  - java
  - ant
  - maven
  #
  # Needs to be installed before RVM
  #
  - sqlite
  #
  # Ruby via RVM (default Debian installations are secure at the cost of
  # being unusable without PATH tweaking, for our VMs we can just go with RVM.
  # This includes rubygems, bundler and rake.
  #
  - rvm
  - rvm::multi
  #
  # Python and pip
  #
  - python
  - python::devshm
  - python::pip
  #
  # Node.js
  #
  - nodejs::multi
  #
  # Data stores
  #
  - mysql::server_on_ramfs
  - postgresql
  - redis
  - riak
  - mongodb
  - couchdb::ppa
  - memcached
  - neo4j-server::tarball
  - cassandra::tarball
  #
  # Messaging
  #
  - rabbitmq::with_management_plugin
  - zeromq::ppa
  #
  # Search
  #
  - elasticsearch
  - sphinx::all
  #
  # Headless WebKit, browsers, Selenium toolchain, etc
  #
  - xserver
  - firefox::tarball
  - chromium
  - phantomjs::tarball
  #
  # Debugging & support
  #
  - emacs::nox
  - vim
  - sweeper

list_versions_by:
  - dpkg --list
  - sudo -i -u travis rvm --version
  - sudo -i -u travis rvm list
  - sudo -i -u travis gem list
  - sudo -i -u travis nvm list
  - sudo -i -u travis gvm list
  - sudo -i -u travis pip --version
  - redis-server --version
  - riak version
  - couchdb -V | grep couchdb
  - service neo4j restart >/dev/null                    && sleep 15 && wget -O- http://localhost:7474/db/data 2>/dev/null | awk -F\" '/neo4j_version/ {print "neo4j", $4}' && service neo4j stop >/dev/null
  - "sudo service cassandra restart >/dev/null          && sleep 15 && /usr/local/cassandra/bin/nodetool version | awk -F: '/ReleaseVersion/ {print $1, $2}'               && service cassandra stop >/dev/null; sudo rm -rf /var/lib/cassandra/*"
  - "sudo service rabbitmq-server restart >/dev/null    && sleep 15 && sudo rabbitmqctl status | awk -F \\\" '/\\\"RabbitMQ\\\"/ {print $2, $4}'                           && sudo service rabbitmq-server stop >/dev/null"
  - "sudo service elasticsearch restart >/dev/null 2>&1 && sleep 15 && curl -XGET localhost:9200 2>/dev/null| grep number                                                  && sudo service elasticsearch stop >/dev/null"
  - echo "sphinx"; ls -lad /usr/local/sphinx-*
  - echo "sphinx default"; ls -l /usr/local/bin/searchd
  - ls -d /usr/local/firefox-*  | awk -F- '{print "firefox", $2}'
  - echo -n "phantomjs "; phantomjs --version
